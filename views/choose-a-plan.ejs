<!DOCTYPE html>
<html>
    <head>
<link rel="apple-touch-icon" sizes="57x57" href="./images/icon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/icon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/icon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/icon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/icon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/icon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/icon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/icon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/icon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/icon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/icon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/icon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/icon/favicon-16x16.png">

<link rel="manifest" href="/manifest.json">
      <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="./dist/css/main.css" rel="stylesheet">
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77516816-1', 'auto');
  ga('send', 'pageview');

</script>
        <style>
            #notice {
              display: block;
            }
            body {
                padding-top: 10px;
            }
        </style>
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
        <script type="text/javascript">
          
          
          
            $(function() {
              var $form = $('#payment-form');
              $form.submit(function(event) {
                // Disable the submit button to prevent repeated clicks:
                $form.find('.submit').prop('disabled', true);
            
                // Request a token from Stripe:
                Stripe.card.createToken($form, stripeResponseHandler);
            
                // Prevent the form from being submitted:
                return false;
              });
              
                function stripeResponseHandler(status, response) {
                  // Grab the form:
                  var $form = $('#payment-form');
                
                  if (response.error) { // Problem!
                    // Show the errors on the form:
                    alert(response.error.message);
                    $form.find('.payment-errors').html(response.error.message);
                    $form.find('.submit').prop('disabled', false); // Re-enable submission
                
                  } else { // Token was created!
                
                    // Get the token ID:
                    var token = response.id;
                
                    // Insert the token ID into the form so it gets submitted to the server:
                    $form.append($('<input type="hidden" name="stripeToken">').val(token));
                
                    // Submit the form:
                    $form.get(0).submit();
                  }
                };
              
            });
        </script>
        <script src='https://www.google.com/recaptcha/api.js'></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77516816-1', 'auto');
  ga('send', 'pageview');

</script>
    </head>
    <body class="money" style="background-color: grey;">
    <% include ./src/components/primary-nav.ejs %>
    <div class="container" style="margin-top: 100px;background-color: white; box-shadow: 0px 0px 65px black;">
            <div class="jumbotron">
                <div class="overlay"></div>
              <div class="container">
                <h1>Save money and focus on what maters most.</h1>
              </div>
            </div>
            <div class="row plan-row">
                <div class="col-lg-8 col-lg-offset-2 ">
                    <div class="panel-group payment-box">
                      <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="text-center"><strong>0 - 150 Unique Tools<br>Your card will not be billed unless you choose to stay!</strong></h4>
                        </div>
                        <div class="panel-body">
                            <h4 class="text-center options-heading">$1,250/year</h4>

                            <div class="row">
                                        <div class="col-md-12" style="margin-top:0px;">
                                      
                                                <div id="notice" role="alert">
                                                    <p id="notice-text" class="text-center">
                                                      <span class="payment-errors"></span>
                                                      <% if(paymentErr) { %>
                                                        There was an error processing your payment
                                                      <% } %>
                                                      <% if(usernameExists) { %>
                                                        Uh Oh the username you choses is already taken.. Please try again.
                                                      <% } %>
                                                    </p>
                                                </div>
                                            
                                            
                                            
                                            
                                        </div>
                                    </div>
                            <form action="" method="POST" id="payment-form">
                              <div class="row">
                                <div class="col-sm-6">
                                  <h3 class="text-center">About You</h3>
                                <div class="form-group">
                                    <input placeholder="Name" class="form-control" name="name" required>
                                </div>
                                <div class="form-group">
                                    <input placeholder="Email" class="form-control" type="email" name="email" required>
                                </div>
                                <div class="form-group">
                                    <input placeholder="Company Name" class="form-control" name="companyName" required>
                                </div>
                                <div class="form-group">
                                    <input placeholder="User Name" class="form-control" name="username" required>
                                </div>
                                <div class="form-group">
                                    <input placeholder="Password" class="form-control" name="password" id="password" type="password" required>
                                </div>
                                <div class="form-group">
                                    <input placeholder="Re Enter Password" class="form-control" id="password-match" name="reEnterPassword" type="password" required>
                                </div>
                                </div>
                                <div class="col-sm-6">
                              <h3 class="text-center">Payment Method</h3>
                              <div class="form-group">
 
                                  <input placeholder="Card Number" data-stripe="number" id="cc-number" type="tel" class=" form-control cc-number" autocomplete="cc-number" placeholder="•••• •••• •••• ••••" required>
                      
                              </div>
                            
                              <div class="form-row">
                                <label>
                                  <span>Expiration (MM/YY)</span>
                                </label>
                                <div class="row">
                                    <div class="col-sm-5">
                                        <input placeholder="MM" type="text" size="2" data-stripe="exp_month" class="form-control" required>
                                    </div>
                                    <div class="col-sm-1">
                                        <span class="mm-year-seperator"> / </span>
                                    </div>
                                    <div class="col-sm-5">
                                        <input placeholder="YY" type="text" size="2" data-stripe="exp_year" class="form-control" required>
                                    </div>
                                </div>
                              </div>
                              <div class="form-row">
                                <label>
                                  <span>CVC</span>
                                  <input data-stripe="cvc" id="cc-cvc" type="tel" class=" form-control cc-cvc" autocomplete="off" placeholder="•••" required>
                                </label>
                              </div>
                              <div class="form-row" style="margin-bottom: 10px;">
                                <label>
                                  <span>Reference Code</span>
                                  <input name="referenceCode" class="form-control" id="referenceCode" placeholder="Reference Code ">
                                </label>
                              </div>
                              <input type="submit" class="submit btn btn-primary" value="Submit Payment">
                                </div>
                              </div>


                            </form>   
                        </div>
                      </div>
                    </div>
                </div>
            </div>
        </div>


        
        <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>
        <script src="../js/payment.min.js"></script>
  <script>
    jQuery(function($) {
      $('[data-numeric]').payment('restrictNumeric');
      $('.cc-number').payment('formatCardNumber');
      $('.cc-exp').payment('formatCardExpiry');
      $('.cc-cvc').payment('formatCardCVC');
      $.fn.toggleInputError = function(erred) {
        this.parent('.form-group').toggleClass('has-error', erred);
        return this;
      };
      $('form').submit(function(e) {
        e.preventDefault();
        var cardType = $.payment.cardType($('.cc-number').val());
        $('.cc-number').toggleInputError(!$.payment.validateCardNumber($('.cc-number').val()));
        $('.cc-exp').toggleInputError(!$.payment.validateCardExpiry($('.cc-exp').payment('cardExpiryVal')));
        $('.cc-cvc').toggleInputError(!$.payment.validateCardCVC($('.cc-cvc').val(), cardType));
        $('.cc-brand').text(cardType);
        $('.validation').removeClass('text-danger text-success');
        $('.validation').addClass($('.has-error').length ? 'text-danger' : 'text-success');
      });
    });
    
    var stripeModeTest = false;
    var stripeKey;
    var stripeKeys = {
      test: 'pk_test_7ySNAoNYSJEwRZuD6xaPec4Z',
      live: 'pk_live_WAT0XAXb4Hw3KJvnZQVl2IuX'
    }
    if (stripeModeTest) {
      stripeKey = stripeKeys.test
    } else {
      stripeKey = stripeKeys.live
    }
    
    Stripe.setPublishableKey(stripeKey);
  </script>
  <script src="./js/payment-app.js"></script>
    </body>
</html>